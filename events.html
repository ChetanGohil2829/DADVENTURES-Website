<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Events — DADVENTURE</title>
<meta name="description" content="DADVENTURE community charity — dads and kids adventures."/>
<link rel="stylesheet" href="css/main.css"/>
</head><body>

<header>
  <div class="container hstack">
    <div class="logo">
      <img src="images/logo.svg" alt="DADVENTURE logo"/>
      <strong>DADVENTURE</strong>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="events.html">Events</a>
      <a href="shop.html">Shop</a>
      <a href="contact.html">Contact</a>
      <a href="join.html">Join Us</a>
      <a href="donate.html">Donate</a>
      <a href="blog.html">Blog</a>
      <a href="debug.html">Debug</a>
      <a href="login.html">Login</a>
    </nav>
    <div class="header-right">
      <div class="searchbar">
        <input class="input" id="globalSearch" placeholder="Search"/>
        <button class="btn" id="doSearch">Search</button>
      </div>
      <div class="music-bar">
        <button class="btn" data-audio="play">Play</button>
        <input type="range" min="0" max="1" step="0.01" value="0.4" class="volume" data-audio="vol"/>
      </div>
    </div>
  </div>
</header>
<audio id="globalMusic" src="audio/relaxing-piano-ambient.wav" preload="auto" muted loop></audio>

<div class="container">

<h2 class="section-title">Events Calendar</h2>
<div id="events" class="grid"></div>

<div id="modal" class="card" style="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);display:none;max-width:480px;width:90%;z-index:40;">
  <div class="hstack" style="justify-content:space-between;">
    <strong id="mTitle"></strong>
    <button class="btn" id="mClose">Close</button>
  </div>
  <div class="small" id="mDate"></div>
  <p id="mDesc"></p>
  <a id="mMap" class="btn" target="_blank" rel="noopener">Open in Google Maps</a>
  <div class="small" id="mCountdown"></div>
</div>
<div id="overlay" style="position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.6);display:none;z-index:30;"></div>

<script>
async function loadEvents(){
  const res = await fetch('content/events/events.json'); const data = await res.json();
  const wrap = document.getElementById('events');
  data.forEach(ev=>{
    const card = document.createElement('div'); card.className='card vstack';
    card.innerHTML = `<img src="${ev.image}" alt="${ev.title}" style="width:100%;border-radius:12px"/>
      <strong>${ev.title}</strong><span class="small">${ev.date}</span><p>${ev.desc}</p>
      <button class="btn" data-open="${ev.id}">Open</button>`;
    wrap.appendChild(card);
  });
  wrap.addEventListener('click', e=>{
    const id = e.target.getAttribute('data-open'); if(!id) return;
    const ev = data.find(x=>x.id===id); openModal(ev);
  });
}
function openModal(ev){
  document.getElementById('mTitle').textContent = ev.title;
  document.getElementById('mDate').textContent = ev.date;
  document.getElementById('mDesc').textContent = ev.desc;
  document.getElementById('mMap').href = ev.map;
  document.getElementById('modal').style.display='block';
  document.getElementById('overlay').style.display='block';
  const target = new Date(ev.date.replace(' ','T')).getTime();
  const el = document.getElementById('mCountdown');
  const iv = setInterval(()=>{
    const now = Date.now(); const d = Math.max(0, target-now);
    const sec = Math.floor(d/1000)%60; const min = Math.floor(d/60000)%60; const hr = Math.floor(d/3600000)%24; const day = Math.floor(d/86400000);
    el.textContent = `Starts in ${day}d ${hr}h ${min}m ${sec}s`;
  },1000);
  document.getElementById('mClose').onclick = ()=>{
    clearInterval(iv);
    document.getElementById('modal').style.display='none';
    document.getElementById('overlay').style.display='none';
  };
}
loadEvents();
</script>

</div>

<footer>
  <div class="container center">
    <div>© 2025 DADVENTURE</div>
    <div class="footer-social">
      <a href="community.html">Facebook</a>
      <span>·</span>
      <a href="community.html">Instagram</a>
      <span>·</span>
      <a href="community.html">TikTok</a>
    </div>
  </div>
  <div class="fixed-bottom-bar">
    <div class="music-bar">
      <button class="btn" data-audio="play">Play</button>
      <input type="range" min="0" max="1" step="0.01" value="0.4" class="volume" data-audio="vol"/>
    </div>
  </div>
  <script src="js/main.js"></script>
</footer>

</body></html>