<!-- v4.2.2 admin dashboard injected; uses existing assets -->
<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Admin Dashboard • DADVENTURES</title>
<link rel="stylesheet" href="assets/styles.css"/>
</head><body>
<main class="container" style="padding:1rem">
  <h1>Admin Dashboard</h1>
  <div style="display:grid;grid-template-columns:repeat(12,1fr);gap:14px">
    <div style="grid-column:span 6" class="card"><h3>Visitors</h3><canvas id="chart-visitors" width="600" height="220" style="width:100%"></canvas></div>
    <div style="grid-column:span 6" class="card"><h3>Donations</h3><canvas id="chart-donations" width="600" height="220" style="width:100%"></canvas></div>
    <div style="grid-column:span 6" class="card"><h3>Shop Sales</h3><canvas id="chart-sales" width="600" height="220" style="width:100%"></canvas></div>
    <div style="grid-column:span 6" class="card"><h3>Event Participation</h3><canvas id="chart-events" width="600" height="220" style="width:100%"></canvas></div>
  </div>
  <div class="card" style="margin-top:14px"><h3>Mission Statement</h3><textarea id="missionInput" class="dv-input" rows="6">Creating unforgettable father‑child adventures that build confidence, connection, and lasting memories.</textarea><div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px"><button class="button" id="saveMission">Save</button></div></div>
  <div class="card" style="margin-top:14px"><h3>Maintenance</h3><label><input type="checkbox" id="maintToggle"/> Enable maintenance banner</label></div>
  <div class="card" style="margin-top:14px"><h3>Debug</h3><div id="debugResults" class="muted">Run checks</div><div style="display:flex;gap:10px;margin-top:10px"><button class="button" id="runChecks">Run</button><button class="button" id="clearLogs">Clear</button><button class="button" id="exportCSV">Export CSV</button></div><pre id="logBox" style="white-space:pre-wrap;max-height:260px;overflow:auto;background:#0e1121;padding:10px;border-radius:10px;border:1px solid rgba(122,168,255,.15)"></pre></div>
</main>
<script src="assets/app.js"></script>
<script>
const months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
const data={visitors:months.map((m,i)=>({label:m,value:400+Math.round(Math.random()*600)})),donations:months.map((m,i)=>({label:m,value:Math.round(Math.random()*1500)})),sales:months.map((m,i)=>({label:m,value:20+Math.round(Math.random()*100)})),events:months.map((m,i)=>({label:m,value:5+Math.round(Math.random()*30)}))};
function drawBarChart(id,series){const c=document.getElementById(id);if(!c)return;const x=c.getContext('2d'),w=c.width,h=c.height;x.clearRect(0,0,w,h);x.strokeStyle='rgba(122,168,255,0.15)';for(let y=0;y<=5;y++){{x.beginPath();x.moveTo(40,20+y*(h-40)/5);x.lineTo(w-10,20+y*(h-40)/5);x.stroke();}}x.strokeStyle='rgba(230,233,255,0.6)';x.beginPath();x.moveTo(40,20);x.lineTo(40,h-20);x.lineTo(w-10,h-20);x.stroke();const max=Math.max(...series.map(s=>s.value))||1;const bw=(w-70)/series.length;series.forEach((s,i)=>{{const X=45+i*bw+6;const bh=(s.value/max)*(h-60);const Y=(h-20)-bh;const g=x.createLinearGradient(0,Y,0,Y+bh);g.addColorStop(0,'rgba(122,168,255,0.9)');g.addColorStop(1,'rgba(255,102,204,0.6)');x.fillStyle=g;x.fillRect(X,Y,bw-12,bh);x.fillStyle='rgba(230,233,255,0.8)';x.font='12px Inter, Arial';x.fillText(s.label,X,h-6);}});}
drawBarChart('chart-visitors',data.visitors);drawBarChart('chart-donations',data.donations);drawBarChart('chart-sales',data.sales);drawBarChart('chart-events',data.events);
function download(filename,text,mime='text/plain'){{const a=document.createElement('a');a.href='data:'+mime+';charset=utf-8,'+encodeURIComponent(text);a.download=filename;a.click();}}
function csv(series){{return 'label,value\n'+series.map(s=>s.label+','+s.value).join('\n');}}
document.querySelectorAll('[data-export]').forEach(b=>b.addEventListener('click',()=>{{const[name,kind]=b.dataset.export.split('-');const map={{visitors:data.visitors,donations:data.donations,sales:data.sales,events:data.events}};if(kind==='csv')download(name+'.csv',csv(map[name]),'text/csv');else{{const c=document.getElementById('chart-'+name);download(name+'.png',c.toDataURL('image/png'));}}}));
const missionInput=document.getElementById('missionInput');const saveMission=document.getElementById('saveMission');if(missionInput&&saveMission){{const m=localStorage.getItem('dadventures_mission');if(m)missionInput.value=m;saveMission.onclick=()=>{{localStorage.setItem('dadventures_mission',missionInput.value);alert('Mission saved');}}}}
const maint=document.getElementById('maintToggle');if(maint){{maint.checked=localStorage.getItem('dadventures_maintenance')==='1';maint.onchange=()=>{{localStorage.setItem('dadventures_maintenance',maint.checked?'1':'0');alert('Maintenance toggled');}}}}
const run=document.getElementById('runChecks'),log=document.getElementById('logBox'),res=document.getElementById('debugResults'),clr=document.getElementById('clearLogs'),exp=document.getElementById('exportCSV');if(run){{run.onclick=()=>{{const t=new Date().toISOString();const checks=['Home assets','Events calendar','Contact form','Shop images','Admin charts'];res.textContent='Completed at '+t;checks.forEach(n=>{{log.textContent+=`[${'{'}t{'}'}] PASS — ${'{'}n{'}'}\n`;}});}}}if(clr){{clr.onclick=()=>log.textContent='';}}if(exp){{exp.onclick=()=>{{const lines=log.textContent.trim().split('\n').filter(Boolean);const out='timestamp,status,component\n'+lines.map(l=>{{const m=l.match(/\[(.*?)\]\s(\w+)\s—\s(.*)/);return m?`${'{'}m[1]{'}'},${'{'}m[2]{'}'},${'{'}m[3]{'}'}`:'';}}).join('\n');download('debug-log.csv',out,'text/csv');}}}
</script>
</body></html>